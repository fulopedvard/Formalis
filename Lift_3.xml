<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
clock x; //Clock of the elevator;
chan all_close, all_enter, open1, close1, enter1, open2, close2, enter2, Floor1, Floor2, Floor0;
broadcast chan all_open;

int waiting=0;</declaration><template><name x="5" y="5">Door</name><parameter>chan &amp;open, chan &amp;close, chan &amp;enter</parameter><declaration>// Place local declarations here.
</declaration><location id="id0" x="-16" y="-608"><name x="-26" y="-638">DOOR_OPEN</name></location><location id="id1" x="-16" y="-816"><name x="-80" y="-856">DOOR_CLOSED</name></location><init ref="id1"/><transition><source ref="id0"/><target ref="id1"/><label kind="guard" x="-352" y="-784">waiting == 0 &amp;&amp; x&gt;=4</label><label kind="synchronisation" x="-232" y="-760">close!</label><label kind="assignment" x="-224" y="-736">x:=0</label><nail x="-160" y="-664"/><nail x="-160" y="-776"/><nail x="-160" y="-824"/></transition><transition><source ref="id0"/><target ref="id0"/><label kind="guard" x="-176" y="-584">waiting&gt;0</label><label kind="synchronisation" x="-176" y="-568">enter!</label><label kind="assignment" x="-216" y="-536">waiting:=waiting-1, x:=0</label><nail x="-64" y="-536"/><nail x="-96" y="-560"/></transition><transition><source ref="id0"/><target ref="id0"/><label kind="guard" x="64" y="-576">waiting&gt;0</label><label kind="synchronisation" x="64" y="-560">all_enter!</label><label kind="assignment" x="64" y="-544">waiting=waiting-1, x:=0</label><nail x="64" y="-568"/><nail x="32" y="-536"/></transition><transition><source ref="id1"/><target ref="id0"/><label kind="guard" x="-120" y="-792">x&gt;=2</label><label kind="synchronisation" x="-120" y="-768">open?</label><label kind="assignment" x="-128" y="-736">waiting:=3</label><nail x="-80" y="-768"/></transition><transition><source ref="id1"/><target ref="id0"/><label kind="synchronisation" x="32" y="-776">all_open?</label><label kind="assignment" x="24" y="-752">waiting:=3</label><nail x="32" y="-776"/><nail x="32" y="-696"/></transition></template><template><name>Elevator</name><location id="id2" x="-5992" y="-720"><name x="-6002" y="-750">idle</name></location><location id="id3" x="-5888" y="-816"><name x="-5976" y="-808">idle_Second</name></location><location id="id4" x="-6104" y="-816"><name x="-6096" y="-808">idle_First</name></location><location id="id5" x="-5888" y="-888"><name x="-5872" y="-896">Second_Floor</name></location><location id="id6" x="-5984" y="-976"><name x="-6088" y="-992">Wait_Door2</name></location><location id="id7" x="-5984" y="-1064"><name x="-6080" y="-1072">Wait_Door1</name></location><location id="id8" x="-5984" y="-1144"><name x="-5960" y="-1152">idle_Ground</name></location><location id="id9" x="-6104" y="-888"><name x="-6200" y="-896">First_Floor</name></location><location id="id10" x="-5984" y="-1224"><name x="-6032" y="-1264">Ground_Floor</name></location><init ref="id10"/><transition><source ref="id2"/><target ref="id10"/><label kind="guard" x="-5664" y="-952">x&gt;=2</label><label kind="synchronisation" x="-5664" y="-968">Floor0?</label><nail x="-5992" y="-664"/><nail x="-5672" y="-672"/><nail x="-5696" y="-1240"/></transition><transition><source ref="id2"/><target ref="id5"/><label kind="guard" x="-5960" y="-856">x&gt;=2</label><label kind="synchronisation" x="-5968" y="-872">Floor2?</label><nail x="-5984" y="-880"/></transition><transition><source ref="id2"/><target ref="id9"/><label kind="guard" x="-6072" y="-864">x&gt;=2</label><label kind="synchronisation" x="-6072" y="-880">Floor1?</label><nail x="-5992" y="-880"/></transition><transition><source ref="id3"/><target ref="id2"/><label kind="synchronisation" x="-5880" y="-768">close2?</label><nail x="-5888" y="-712"/></transition><transition><source ref="id4"/><target ref="id2"/><label kind="synchronisation" x="-6176" y="-760">close1?</label><nail x="-6104" y="-720"/></transition><transition><source ref="id3"/><target ref="id3"/><label kind="synchronisation" x="-5800" y="-824">enter2?</label><nail x="-5816" y="-832"/><nail x="-5816" y="-784"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="synchronisation" x="-6216" y="-824">enter1?</label><nail x="-6160" y="-840"/><nail x="-6152" y="-800"/></transition><transition><source ref="id5"/><target ref="id3"/><label kind="synchronisation" x="-5880" y="-872">open2!</label><label kind="assignment" x="-5880" y="-856">x:=2</label></transition><transition><source ref="id9"/><target ref="id4"/><label kind="synchronisation" x="-6164" y="-867">open1!</label><label kind="assignment" x="-6164" y="-852">x:=2</label></transition><transition><source ref="id6"/><target ref="id5"/><label kind="guard" x="-5920" y="-944">x&gt;=2</label><label kind="synchronisation" x="-5944" y="-960">Floor2?</label></transition><transition><source ref="id6"/><target ref="id9"/><label kind="guard" x="-6096" y="-944">x&gt;=2</label><label kind="synchronisation" x="-6080" y="-960">Floor1?</label></transition><transition><source ref="id7"/><target ref="id6"/><label kind="synchronisation" x="-5976" y="-1032">close2?</label></transition><transition><source ref="id8"/><target ref="id8"/><label kind="synchronisation" x="-6128" y="-1136">all_enter?</label><nail x="-6048" y="-1152"/><nail x="-6040" y="-1112"/></transition><transition><source ref="id8"/><target ref="id7"/><label kind="synchronisation" x="-5976" y="-1112">close1?</label></transition><transition><source ref="id10"/><target ref="id8"/><label kind="synchronisation" x="-5976" y="-1200">all_open!</label><label kind="assignment" x="-5976" y="-1184">x:=2</label></transition></template><template><name>Person</name><parameter>chan &amp;Floor</parameter><location id="id11" x="-64" y="-224"><name x="-74" y="-254">idle_Person</name></location><init ref="id11"/><transition><source ref="id11"/><target ref="id11"/><label kind="synchronisation" x="-96" y="-152">Floor!</label><nail x="-112" y="-160"/><nail x="-32" y="-168"/></transition></template><system>// Place template instantiations here.

Door1 = Door(open1,close1, enter1);
Door2 = Door(open2,close2, enter2);
Person1 = Person(Floor1);
Person2 = Person(Floor2);
Person3 = Person(Floor0);



// List one or more processes to be composed into a system.
system Door1, Door2, Person1, Person2, Person3, Elevator;</system></nta>